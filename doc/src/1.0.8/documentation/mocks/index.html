<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>RSpec-1.0.8: Mocks</title>
    <link href="../../default.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="../../breadcrumbs.css" rel="stylesheet" type="text/css" media="screen"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="RSpec, Mocks, BDD, behaviour driven development, behavior driven development, TDD, test driven development, Ruby, Rails, testing, watir, selenium"/>
    <style><!--
    div.breadcrumbs ul li {
    	background-image: url(../../images/arrow.gif);
    }
    --></style>
  </head>
<body>

<div id="container">
  <div id="header">
    <h1>RSpec 1.0.8</h1>
  </div>

  <div class="breadcrumb-menu">
    <div class="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Home</a></li>
    <li><a href="../index.html">Documentation</a></li>
    <li class="selected"><span>Mocks</span></li>
  </ul>
</div>
<div class="menu">
  <ul>
    <li><a href="mocks.html">Mock Objects</a></li>
    <li><a href="partial_mocks.html">Partial Mocks</a></li>
    <li><a href="stubs.html">Stubs</a></li>
    <li><a href="other_frameworks.html">Other Mock/Stub Frameworks</a></li>
  </ul>
</div>

  </div>

  <div id="content">
    <h2>Mocks, Stubs and Partials</h2>


	<p>RSpec will create mocks and stubs for you at runtime, or attach stub/mock behaviour
to any of your real objects (Partial Mock/Stub). Note that the underlying implementation
for mocks and stubs is the same, and you can therefore intermingle mock and stub
behaviour in either. There is a semantic difference in how they are created, however,
which can help clarify the role it is playing within a given spec.</p>


	<h3>Mocks</h3>


	<p><a href="mocks.html">Mocks</a> are objects that
allow you to set and verify expectations. They are very useful for specifying how the subject of
the spec interacts with its collaborators. This approach is widely known as &#8220;interaction
testing&#8221;.</p>


	<p>Mocks are also very powerful (though less widely understood) as a design tool. As you are
driving the implementation of a given class, Mocks provide an amorphous
collaborator that can change in behaviour as quickly as you can write an expectation in your
spec. These changes are tantamount to designing the interface to a collaborator that often
does not yet exist. As the shape of the class being specified becomes more clear, so do the
requirements for its collaborators &#8211; often leading to the discovery of new types that are
needed in your system.</p>


	<p>Read <a href="http://www.mockobjects.com/files/endotesting.pdf">Endo-Testing</a> for a much
more in depth description of this process.</p>


	<h3>Stubs</h3>


	<p><a href="stubs.html">Stubs</a> are objects that allow you to set &#8220;stub&#8221; responses to
messages. As Martin Fowler points out on his site, <a href="http://www.martinfowler.com/articles/mocksArentStubs.html">Mocks aren&#8217;t stubs</a>. Paraphrasing Fowler&#8217;s paraphrasing
of Gerard Meszaros: Stubs provide canned responses to messages they might receive in a test, while
mocks allow you to specify and, subsquently, verify that certain messages should be received during
the execution of a test.</p>


	<h3>Partials</h3>


	<p>RSpec also supports <a href="partial_mocks.html">Partials</a>, allowing you to add stub/mock behaviour
to instances of your existing classes. This is generally
something to be avoided, because changes to the class can have ripple effects on
seemingly unrelated specs. When specs fail due to these ripple effects, the fact
that some methods are being mocked can make it difficult to understand why a
failure is occurring.</p>


	<p>That said, <a href="partial_mocks.html">Partials</a> do allow you to expect and
verify interactions with class methods such as <code>:find</code> and <code>:create</code>
on Ruby on Rails model classes.</p>


	<h3>Notes</h3>


	<p>There are many different viewpoints about the meaning of mocks and stubs. If you are interested
in learning more, here is some recommended reading:</p>


	<ul>
	<li>Mock Objects: <a href="http://www.mockobjects.com/">http://www.mockobjects.com/</a></li>
		<li>Endo-Testing:<a href="http://www.mockobjects.com/files/endotesting.pdf">http://www.mockobjects.com/files/endotesting.pdf</a></li>
		<li>Mock Roles, Not Objects: <a href="http://www.mockobjects.com/files/mockrolesnotobjects.pdf">http://www.mockobjects.com/files/mockrolesnotobjects.pdf</a></li>
		<li>Test Double Patterns: <a href="http://xunitpatterns.com/Test%20Double%20Patterns.html">http://xunitpatterns.com/Test%20Double%20Patterns.html</a></li>
		<li>Mocks aren&#8217;t stubs: <a href="http://www.martinfowler.com/articles/mocksArentStubs.html">http://www.martinfowler.com/articles/mocksArentStubs.html</a></li>
	</ul>
    
    <div id="footer">
      Webdesign by <a href="http://www.oswd.org/user/profile/id/9462">JM</a>
      <SCRIPT type='text/javascript' language='JavaScript' src='http://www.ohloh.net/projects/4386;badge_js'></SCRIPT>
    </div>
  </div>
</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1889510-1";
urchinTracker();
</script>
</body>
</html>