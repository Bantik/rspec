<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>RSpec-1.0.8: Test::Unit Cheat Sheet</title>
    <link href="../default.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="../breadcrumbs.css" rel="stylesheet" type="text/css" media="screen"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="RSpec, Test::Unit Cheat Sheet, BDD, behaviour driven development, behavior driven development, TDD, test driven development, Ruby, Rails, testing, watir, selenium"/>
    <style><!--
    div.breadcrumbs ul li {
    	background-image: url(../images/arrow.gif);
    }
    --></style>
  </head>
<body>

<div id="container">
  <div id="header">
    <h1>RSpec 1.0.8</h1>
  </div>

  <div class="breadcrumb-menu">
    <div class="breadcrumbs">
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="index.html">Documentation</a></li>
    <li class="selected"><span>Test::Unit Cheat Sheet</span></li>
  </ul>
</div>
<div class="menu">
  <ul>
  </ul>
</div>

  </div>

  <div id="content">
    <h2>Coming from Test::Unit to RSpec</h2>


	<p>RSpec&#8217;s expectation <span class="caps">API</span> is a superset of Test::Unit&#8217;s assertion <span class="caps">API</span>. Use this table to
find the RSpec equivalent of Test::Unit&#8217;s asserts.</p>


	<table>
		<tr>
			<td> Test::Unit                                           </td>
			<td> RSpec                           </td>
			<td> Comment                             </td>
		</tr>
		<tr>
			<td> assert(object)                                       </td>
			<td> N/A                             </td>
		</tr>
		<tr>
			<td> assert_block {...}                                   </td>
			<td> lambda {...}.call.should be_true</td>
		</tr>
		<tr>
			<td> assert_equal(expected, actual)                       </td>
			<td> actual.should == expected       </td>
			<td> Uses <code>==</code> </td>
		</tr>
		<tr>
			<td> &#8217;&#8217;                                                   </td>
			<td> actual.should eql(expected)      </td>
			<td> Uses <code>Object.eql?</code> </td>
		</tr>
		<tr>
			<td> assert_in_delta(expected_float, actual_float, delta) </td>
			<td> actual_float.should be_close(expected_float, delta) </td>
		</tr>
		<tr>
			<td> assert_instance_of(klass, object)                    </td>
			<td> actual.should be_an_instance_of(klass) </td>
		</tr>
		<tr>
			<td> assert_match(pattern, string)                        </td>
			<td> string.should match(regexp)     </td>
		</tr>
		<tr>
			<td> &#8217;&#8217;                                                   </td>
			<td> string.should =~ regexp         </td>
		</tr>
		<tr>
			<td> assert_nil(object)                                   </td>
			<td> actual.should be_nil   </td>
		</tr>
		<tr>
			<td> assert_no_match(regexp, string)                      </td>
			<td> string.should_not match(regexp) </td>
		</tr>
		<tr>
			<td> assert_not_equal(expected, actual)                   </td>
			<td> actual.should_not eql(expected)       </td>
			<td> Uses <code>!Object.eql?</code> </td>
		</tr>
		<tr>
			<td> assert_not_nil(object)                               </td>
			<td> actual.should_not be_nil       </td>
		</tr>
		<tr>
			<td> assert_not_same(expected, actual)                    </td>
			<td> actual.should_not equal(nil)    </td>
			<td> Uses <code>Object.equal?</code> </td>
		</tr>
		<tr>
			<td> assert_nothing_raised(<strong>args) {...}                   </td>
			<td> lambda {...}.should_not raise_error(Exception=nil, message=nil) </td>
		</tr>
		<tr>
			<td> assert_nothing_thrown {...}                          </td>
			<td> lambda {...}.should_not throw_symbol(symbol=nil) </td>
		</tr>
		<tr>
			<td> assert_operator(object1, operator, object2)          </td>
			<td> N/A </td>
		</tr>
		<tr>
			<td> assert_raise(</strong>args) {...}                            </td>
			<td> lambda {...}.should raise_error(Exception=nil, message=nil) </td>
		</tr>
		<tr>
			<td> assert_raises(*args) {...}                           </td>
			<td> lambda {...}.should raise_error(Exception=nil, message=nil) </td>
		</tr>
		<tr>
			<td> assert_respond_to(object, method)                    </td>
			<td> actual.should respond_to(method) </td>
		</tr>
		<tr>
			<td> assert_same(expected, actual)                        </td>
			<td> actual.should equal(expected)         </td>
			<td> Uses <code>!Object.equal?</code> </td>
		</tr>
		<tr>
			<td> assert_send(send_array)                              </td>
			<td> N/A </td>
		</tr>
		<tr>
			<td> assert_throws(expected_symbol, &#38;proc)                </td>
			<td> lambda {...}.should throw_symbol(symbol=nil) </td>
		</tr>
		<tr>
			<td> flunk(message=&#8221;Flunked&#8221;)                             </td>
			<td> violated(message=nil) </td>
		</tr>
		<tr>
			<td> N/A                                                  </td>
			<td> actual.should_be_something </td>
			<td> Passes if object.something? is true </td>
		</tr>
	</table>




	<h2>Regarding Equality</h2>


	<p>RSpec lets you express equality the same way Ruby does. This is different from
Test::Unit and other xUnit frameworks, and this may cause some confusion for those
of you who are making a switch.</p>


	<p>Consider this example:</p>


<pre class="ruby"><code><span class="ident">words</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">the words</span><span class="punct">&quot;</span>
<span class="ident">assert_equals</span><span class="punct">(&quot;</span><span class="string">the words</span><span class="punct">&quot;,</span> <span class="ident">words</span><span class="punct">)</span> <span class="comment">#passes</span>
<span class="ident">assert_same</span><span class="punct">(&quot;</span><span class="string">the words</span><span class="punct">&quot;,</span> <span class="ident">words</span><span class="punct">)</span> <span class="comment">#fails</span>
</code></pre>

	<p>xUnit frameworks traditionally use method names like <code>#assert_equals</code> to
imply object equivalence (objects with the same values) and method names like <code>#assert_same</code> to
imply object identity (actually the same object). For programmers who are used to this syntax,
it makes perfect sense to see this in a unit testing framework for Ruby.</p>


	<p>The problem that we found is that Ruby handles equality differently from other languages. In
java, for example, we override <code>Object#equals(other)</code> to describe object equivalence,
whereas we use <code>==</code> to describe object identity. In Ruby, we do just the opposite.
In fact, Ruby provides us with four ways to express equality:</p>


<pre class="ruby"><code><span class="ident">a</span> <span class="punct">==</span> <span class="ident">b</span>
<span class="ident">a</span> <span class="punct">===</span> <span class="ident">b</span>
<span class="ident">a</span><span class="punct">.</span><span class="ident">equal?</span><span class="punct">(</span><span class="ident">b</span><span class="punct">)</span>
<span class="ident">a</span><span class="punct">.</span><span class="ident">eql?</span><span class="punct">(</span><span class="ident">b</span><span class="punct">)</span>
</code></pre>

	<p>Each of these has its own semantics, which can (and often do) vary from class to class. In
order to minimize the translation required to understand what an example might be expressing,
we chose to express these directly in RSpec. If you understand Ruby equality, then you
can understand what RSpec examples are describing:</p>


<pre class="ruby"><code><span class="ident">a</span><span class="punct">.</span><span class="ident">should</span> <span class="punct">==</span> <span class="ident">b</span>      <span class="comment">#passes if a == b</span>
<span class="ident">a</span><span class="punct">.</span><span class="ident">should</span> <span class="punct">===</span> <span class="ident">b</span>     <span class="comment">#passes if a === b</span>
<span class="ident">a</span><span class="punct">.</span><span class="ident">should</span> <span class="ident">equal</span><span class="punct">(</span><span class="ident">b</span><span class="punct">)</span>  <span class="comment">#passes if a.equal?(b)</span>
<span class="ident">a</span><span class="punct">.</span><span class="ident">should</span> <span class="ident">eql</span><span class="punct">(</span><span class="ident">b</span><span class="punct">)</span>    <span class="comment">#passes if a.eql?(b)</span>
</code></pre>

	<p>See <a href="http://www.ruby-doc.org/core/classes/Object.html#M001057">http://www.ruby-doc.org/core/classes/Object.html#M001057</a> for
more information about equality in Ruby.</p>
    
    <div id="footer">
      Webdesign by <a href="http://www.oswd.org/user/profile/id/9462">JM</a>
      <SCRIPT type='text/javascript' language='JavaScript' src='http://www.ohloh.net/projects/4386;badge_js'></SCRIPT>
    </div>
  </div>
</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1889510-1";
urchinTracker();
</script>
</body>
</html>