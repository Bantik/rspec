<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>RSpec-1.0.8: Partial Mocks</title>
    <link href="../../default.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="../../breadcrumbs.css" rel="stylesheet" type="text/css" media="screen"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="RSpec, Partial Mocks, BDD, behaviour driven development, behavior driven development, TDD, test driven development, Ruby, Rails, testing, watir, selenium"/>
    <style><!--
    div.breadcrumbs ul li {
    	background-image: url(../../images/arrow.gif);
    }
    --></style>
  </head>
<body>

<div id="container">
  <div id="header">
    <h1>RSpec 1.0.8</h1>
  </div>

  <div class="breadcrumb-menu">
    <div class="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Home</a></li>
    <li><a href="../index.html">Documentation</a></li>
    <li><a href="index.html">Mocks</a></li>
    <li class="selected"><span>Partial Mocks</span></li>
  </ul>
</div>
<div class="menu">
  <ul>
  </ul>
</div>

  </div>

  <div id="content">
    <h2>Partial Mocks</h2>


	<p>RSpec allows you <a href="stubs.html">stub methods</a> and set <a href="mocks.html">mock
expectations</a> for methods on existing Class objects. The main reason for including
this is to support mocking/stubbing Ruby on Rails model class methods in controller and/or view specs.</p>


<pre class="ruby"><code><span class="constant">MyModel</span><span class="punct">.</span><span class="ident">should_receive</span><span class="punct">(</span><span class="symbol">:find</span><span class="punct">).</span><span class="ident">with</span><span class="punct">(</span><span class="ident">id</span><span class="punct">).</span><span class="ident">and_return</span><span class="punct">(</span><span class="attribute">@mock_model_instance</span><span class="punct">)</span>
</code></pre>

	<p><a href="mocks.html">Mocking</a> (and/or <a href="stubs.html">stubbing</a>) the class
level methods and having them return a mock instead of a real instance
of the model class allows you to spec your controllers and views in isolation from the
instance level logic of your model classes. This means that you can change the validation
rules for a model, for example, and drive that in the model specs without affecting the
controller and view specs.</p>


	<p>This also helps to keep the context of your spec completely in view (no having to look at fixtures/xyz.yml to understand what&#8217;s going on).</p>


	<p>Additionally, although we haven&#8217;t completely isolated specs from the
database yet (you still need one for the models to actually work), this sort of mocking
will save you trips to the database, speeding things up quite a bit in a larger app.</p>
    
    <div id="footer">
      Webdesign by <a href="http://www.oswd.org/user/profile/id/9462">JM</a>
      <SCRIPT type='text/javascript' language='JavaScript' src='http://www.ohloh.net/projects/4386;badge_js'></SCRIPT>
    </div>
  </div>
</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1889510-1";
urchinTracker();
</script>
</body>
</html>