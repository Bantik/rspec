---
title: Test::Unit Migration
inMenu: true
---
h2. Test::Unit migration

RSpec's test2spec command line tool translates existing Test::Unit classes to RSpec.  

Before you can use test2spec you must gem install ParseTree and RubyInline.
RubyInline only work on systems that have a C compiler - i.e. most anything except Windows.

If you're stuck on Windows, ask a friend who has a POSIX system to translate your specs.
Once translated they can run on any Ruby platform (including Windows). After all, it's
just Ruby.

h2. The test2spec command line

<pre>
test2spec --help
{execute: ruby ../bin/test2spec --help}
</pre>

A typical invocation might look like this:

<pre>
test2spec --specdir spec test
</pre>

h2. Sample output

<notextile>
<table>
  <thead>
    <tr>
      <td>Test::Unit</td>
      <td>RSpec (translated by test2spec)</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <ruby file="../test/spec/tool/test_unit_api_test.rb"/>
      </td>
      <td>
        <ruby file="../test/spec/tool/test_unit_api_spec.rb"/>
      </td>
    </tr>
  </tbody>
</table>
</notextile>

h2. Troubleshooting

In some cases, test2spec will not be able to translate a test class. In that case, please submit a bug report
at RSpec's bug report system  along with some code so we can reproduce (and hopefully - fix) the problem. 
-Or better - submit a patch.

h2. Internals

The test2spec tool is based on three other tools:

* "RubyToRuby":http://blog.zenspider.com/archives/2005/02/rubytoruby.html
* "ParseTree":http://rubyforge.org/projects/parsetree/
* "RubyInline":http://rubyforge.org/projects/rubyinline/

In fact, it's based on a modified version of "George Moschovitis' RubyToRuby enhancement":http://dark.fhtr.org/ruby2ruby.rb
of "Ryan Davis' original RubyToRuby":http://blog.zenspider.com/archives/2005/02/rubytoruby.html.

It has been modified to fix some subtle bugs that were not found by Gerorge's tests. The modified RubyToRuby
currently lives in RSpec's subversion repository.

The translation is done by TestUnitTranslator - subclass of RubyToRuby that writes out the syntax tree a little differently than
its superclass. TestUnitTranslator looks for certain Test::Unit patterns and writes out an RSpec translation instead.
